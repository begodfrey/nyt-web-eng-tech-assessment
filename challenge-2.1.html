<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Throttled Click Counter</title>
  <style type="text/css">
    body {
      margin: 0;
      font-family: sans-serif;
    }

    header,
    main {
      margin: 50px;
    }

    button {
      display: block;
      font-size: 20px;
      text-transform: uppercase;
      font-weight: 700;
      display: inline-block;
      background: #FFF;
      color: #000;
      padding: .5em 1em;
      border: 5px solid #000;
      border-radius: .5em;
      cursor: pointer;
      filter: drop-shadow(5px 5px 6px rgba(0, 0, 0, 0.5));
    }

    button:hover {
      transform: scale(1.01);
    }

    button:active {
      transform: scale(.99);
    }

    p {
      font-size: 15px;
    }
  </style>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {

      let clickCount = 0;
      let countDisplayTime = new Date().getTime();
      const counter = document.getElementById('counter');
      const incrementer = document.getElementById('incrementer');

      function updateCountDisplay() {
        counter.innerText = clickCount;
        console.log(`display count updated - ${new Date().getTime() - countDisplayTime}ms since last update`);
        countDisplayTime = new Date().getTime();
      }

      function debounce(func) {
        let timeout = null;
        let lastDebounce = 0;
        return () => {
          clearTimeout(timeout);

          if (Date.now() - lastDebounce >= 500) {
            func();
            lastDebounce = Date.now();
          } else {
            timeout = setTimeout(() => {
              func();
              timeout = null;
              lastDebounce = Date.now();
            }, 500);
          }
        }
      }

      const debounceCountUpdate = debounce(() => {
        updateCountDisplay();
        console.log(`debounce count update run with click count ${clickCount}`);
      });

      incrementer.addEventListener('click', (e) => {
        clickCount++;
        debounceCountUpdate();
        console.log(`debounce incrementer clicked with click count ${clickCount}`);
      });

    });
  </script>
</head>

<body>
  <header>
    <h1>Throttled Click Counter</h1>
  </header>
  <main>
    <h2><span id="counter">0</span> Clicks</h2>
    <button id="incrementer">Increase Clicks</button>
  </main>
</body>

</html>